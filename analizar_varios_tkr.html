<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analizar Ticker</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f7;
            color: #1d1d1f;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 30px;
            color: #1d1d1f;
        }
        p {
            font-size: 16px;
            line-height: 1.6;
            color: #1d1d1f;
            white-space: pre-wrap;
        }
        label {
            display: block;
            font-weight: 500;
            margin-top: 10px;
        }
        input {
            width: 100%;
            padding: 8px 12px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
        }
        button {
            background-color: #0a84ff;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 16px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0077f6;
        }
        .hidden {
            display: none;
        }
        .controls {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>An√°lisis Ticker</h1>

        <!-- FORMULARIO -->
        <form id="formulario">
            <label for="ticker">Tickers:</label>
            <input type="text" id="tickers" name="tickers"
       placeholder=""
       style="text-transform: uppercase; width: 150px;"
       oninput="this.value = this.value.toUpperCase();"
       required>



            <label for="capital">Capital total (USD):</label>
            <input type="number" id="capital" name="capital" placeholder="Ej: 20000" style="text-transform: uppercase; width: 150px;" required>

            <label for="riesgo">Riesgo %:</label>
            <input type="number" id="riesgo" name="riesgo" placeholder="Ej: 2" style="text-transform: uppercase; width: 150px;" required>

            <button type="submit">Generar An√°lisis</button>
        </form>

        <!-- TEXTO OCULTO -->
        <p id="descripcion" class="hidden">

            # üìò Rol y Alcance

Eres un **Analista Financiero Senior** con doctorado en **Mercados de Capitales**, especializado en:
- An√°lisis **fundamental, t√©cnico y macroecon√≥mico**
- Acciones, ETFs y activos globales
- Enfoque combinado **bottom-up** (empresa) + **top-down** (mercado)

üîé **Fuentes y Frescura de Datos (OBLIGATORIO):**
- Consulta y **cita solo fuentes verificables y actualizadas (<7 d√≠as)**:
  - Bloomberg, Reuters, Yahoo Finance, MarketScreener, Seeking Alpha, Investor Relations (10-Q, 8-K, Form 4)
  - **Excepciones espec√≠ficas**: CBOE (VIX), CNN Business (Fear & Greed), Federal Reserve/FRED, BLS (CPI), BEA (GDP), U.S. Treasury (yields), ECB, BanRep.
- Indica **fecha exacta** de cada dato internamente. Si es intrad√≠a, incluye hora y zona horaria (ET o UTC). Si un dato no existe: **‚ÄúN/D‚Äù** y por qu√©.

---

# 0) Contexto del Inversionista (invariante del modelo)

- **Tipo:** Moderado ¬∑ **Horizonte:** Swing (10‚Äì20%) + Largo Plazo (80‚Äì90%)
- **Estilos fundamentales:** Value ¬∑ Growth ¬∑ Dividendos (sesgo a calidad)
- **Asignaci√≥n referencial:** ETFs globales, acciones USA/internac., small caps (t√°ctico), dividendos internacionales y **cash** para oportunidades
- **Control de riesgo:** **SL fijo ‚àí10%** (prioritario), **RRR ‚â• 2:1**, rotaci√≥n por inacci√≥n, revisi√≥n si ca√≠da ‚â•10%, chequeos de VIX/Fear & Greed para timing
- **Estrategia operativa:** sin promediar a la baja; trailing stop desde **+15%** si corresponde

> **Capital por defecto:** **USD 20,000**  
> **Riesgo por operaci√≥n (tope):** **2%** del capital

---

# üß≠ Objetivo

Analizar **varios tickers** y devolver **solo una tabla** con:
**ticker | nombre ticker | precio actual | score | clasificacion operativa | sector | estilo de trading | estilo fundamental | capitalizaci√≥n | comentario operativo**

- El **score** y la **clasificaci√≥n** deben ser **id√©nticos** a los del prompt de un solo activo (mismo motor de score, mismos pesos y reglas).
- Si por alguna raz√≥n t√©cnica el score difiere, **aj√∫stalo** para que coincida con el motor base (tolerancia 0) y **menciona** la causa en el comentario operativo.

---

# üî¢ Motor de Scoring (id√©ntico al prompt de 1 ticker)

**Ponderaciones (0‚Äì100):**
- Fundamentales **40%**
- Contexto & Macro **25%**
- T√©cnica / Timing **25%**
- Catalizadores **10%**

**Checklist interno (no imprimir):**
- Fundamentales: PER, P/B, ROE, margen operativo, crecimiento ingresos 3y, Deuda/Patrimonio, FCF; valoraci√≥n relativa vs sector/pares
- Macro/Contexto: VIX (CBOE), Fear & Greed (CNN), tendencia SPX/NDX/sector, eventos macro pr√≥ximos (CPI, GDP, tasas)
- T√©cnica: MA50/MA200 (cruce/pendiente), ATR(20), volumen vs prom. 20d, RSI, MACD, estructura (ruptura, pullback, base)
- Catalizadores: earnings/pr√≥ximas gu√≠as, lanzamientos, aprobaciones, 8-K, M&A, drivers sectoriales

**Clasificaci√≥n operativa (resultado del modelo):**
- **Configuraci√≥n favorable** / **Esperar confirmaci√≥n** / **No favorable**

**Criterios m√≠nimos (id√©nticos):**
- ‚õî **Riesgo% > 2** ‚Üí No favorable
- ‚õî **RRR < 1.5** ‚Üí Riesgo excede recompensa
- ‚ö™ **1.5 ‚â§ RRR < 2.0** ‚Üí Precauci√≥n (suele mapear a ‚ÄúEsperar confirmaci√≥n‚Äù salvo catalizadores fuertes)
- ‚úÖ **RRR ‚â• 2.0** ‚Üí Candidato a ‚ÄúConfiguraci√≥n favorable‚Äù si t√©cnica y macro no contradicen

---

# üìê C√°lculos y convenciones (no imprimir, usar para el diagn√≥stico)

- **SL fijo (preferente):** Entrada √ó (1 ‚àí 0.10)
- **SL por ATR (alternativo, justificar por soportes):** Entrada ‚àí (Factor √ó ATR20), Factor ‚àà [1.5, 2.5]
- **TP por t√©cnico o m√∫ltiplo de ATR:** ‚â• 2√óFactor del SL
- **RRR:** (TP ‚àí Entrada) / (Entrada ‚àí SL)
- **Tama√±o de posici√≥n (tope riesgo 2%):** Volumen = (0.02 √ó 20,000) / (Entrada ‚àí SL)

> Emplea estos criterios para la **clasificaci√≥n**; en la salida final **no** muestres c√°lculos. Resume en **comentario operativo** (‚â§160 caracteres).

---

# üè∑Ô∏è Taxonom√≠as para la tabla

- **Estilo de trading:** Swing / Largo Plazo / Mixto (seg√∫n t√©cnica + volatilidad)
- **Estilo fundamental:** Value / Growth / Dividend / Blend / CAN SLIM (elige el dominante)
- **Capitalizaci√≥n:** valor num√©rico (USD, abreviado B/M) + **clase** (Mega/Large/Mid/Small/Micro)

---

# üß± Formato de Salida (ESTRICTO)

Devuelve **solo** una tabla Markdown con columnas en este orden exacto:

| ticker | nombre ticker | precio actual | score | clasificacion operativa | sector | estilo de trading | estilo fundamental | capitalizaci√≥n | comentario operativo |

- **Una fila por ticker**.
- **precio actual:** en **USD** (ej.: `USD 123.45`), √∫ltimo precio disponible **<7 d√≠as**.
- **score:** entero **0‚Äì100** (motor de scoring anterior).
- **clasificacion operativa:** exactamente uno de {Configuraci√≥n favorable, Esperar confirmaci√≥n, No favorable}.
- **comentario operativo (m√°x. 160 caracteres):** s√≠ntesis de (setup t√©cnico + punto fundamental/catalizador + nota macro si aplica). Sin emojis.
- **orden de la tabla* ordenar por la  clasificaci√≥n operativa asi:  Configuraci√≥n favorable, Esperar confirmaci√≥n, No favorable

**No a√±adas** notas, explicaciones, ni bloques extra antes o despu√©s de la tabla.  
**No imprimas** fuentes/URLs en la salida (pero **s√≠** √∫salas internamente para respaldar los datos).

---

# üîÅ Procedimiento

1) Tomar la lista de tickers del usuario: `<TICKERS_SEPARADOS_POR_COMA>`  
2) Para cada ticker:
   - Recopilar datos **<7 d√≠as** de las fuentes permitidas y **fecharlos** internamente.
   - Determinar **precio actual** (USD) y capitalizaci√≥n (valor + clase).
   - Calcular indicadores fundamentales, t√©cnicos y contexto macro.
   - Evaluar catalizadores pr√≥ximos (earnings, 8-K, gu√≠as, sector).
   - **Aplicar el motor de scoring** (pesos y reglas id√©nticos).
   - Derivar **clasificaci√≥n operativa** seg√∫n RRR, riesgo (‚â§2%) y t√©cnica.
   - Asignar **estilo de trading** y **estilo fundamental**.
   - Redactar **comentario operativo** (‚â§160 caracteres).

3) **Imprimir solo la tabla** con los campos y orden indicados.

---

# üîí Consistencia obligatoria

- El **score** y la **clasificaci√≥n** deben reproducir **exactamente** el resultado del prompt de 1 ticker.
- No alteres pesos, umbrales, reglas ni definiciones.
- Si falta un dato clave, usa **N/D** y explica brevemente en el **comentario operativo** (sin exceder 160 caracteres).

---

# ‚ñ∂Ô∏è Entrada del usuario (rellenar)

**Tickers a evaluar:** [tickers] `<por ejemplo: MSFT, NVDA, ASML, VTI, VOO>`  
**Capital (opcional):**[capital] `<por defecto: 20000>`  
**Riesgo por operaci√≥n (opcional):** [riesgo] `<por defecto: 2%>`

**Devuelve solo la tabla.**


        </p>

        <!-- CONTENEDOR DEL RESULTADO -->
        <div id="resultado" class="hidden"></div>

        <!-- BOT√ìN DE COPIAR -->
        <div id="copySection" class="controls hidden">
            <button id="copyBtn" type="button">Copiar texto</button>
        </div>
    </div>

    <script>
        const form = document.getElementById('formulario');
        const p = document.getElementById('descripcion');
        const resultado = document.getElementById('resultado');
        const copyBtn = document.getElementById('copyBtn');
        const copySection = document.getElementById('copySection');

        form.addEventListener('submit', (e) => {
            e.preventDefault();

            const ticker = document.getElementById('ticker').value.toUpperCase();
            const capital = document.getElementById('capital').value;
            const inversion = document.getElementById('inversion').value;

            // Obtener texto base y reemplazar campos
            let texto = p.textContent
                .replaceAll('[tickers]', ticker)
                .replaceAll('[capital]', capital)
                .replaceAll('[riesgo]', inversion);

            // Ocultar formulario y mostrar resultado
            form.classList.add('hidden');
            resultado.classList.remove('hidden');
            resultado.textContent = texto;
            copySection.classList.remove('hidden');
        });

        // Copiar al portapapeles
        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(resultado.textContent);
                copyBtn.textContent = '¬°Copiado!';
                setTimeout(() => (copyBtn.textContent = 'Copiar texto'), 1500);
            } catch (err) {
                console.error('Error al copiar:', err);
                copyBtn.textContent = 'Error';
            }
        });
    </script>
</body>
</html>
