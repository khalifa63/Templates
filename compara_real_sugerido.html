<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generador de Prompt Profesional</title>

   <style>
  :root {
    font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
    background-color: #f8fafc;
    color: #1e293b;
  }

  body {
    margin: 0;
    padding: 32px 20px;
    background: #f8fafc;
    min-height: 100vh;
  }

  .container {
    max-width: 900px;
    margin: 0 auto;
    background: #ffffff;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    padding: 32px;
  }

  h1 {
    margin-top: 0;
    font-size: 1.6rem;
    color: #0f172a;
  }

  h3 {
    margin-bottom: 8px;
    color: #1e293b;
  }

  p {
    color: #475569;
    font-size: 0.95rem;
  }

  .section {
    margin-top: 28px;
  }

  .box {
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    background: #f9fafb;
    padding: 16px;
  }

  textarea {
    width: 100%;
    min-height: 180px;
    border: none;
    resize: vertical;
    background: transparent;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #0f172a;
  }

  textarea::placeholder {
    color: #94a3b8;
  }

  textarea:focus {
    outline: none;
  }

  .actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
    flex-wrap: wrap;
  }

  button {
    border: none;
    padding: 10px 22px;
    border-radius: 999px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.95rem;
  }

  button.primary {
    background: #3b82f6;
    color: #ffffff;
    box-shadow: 0 6px 14px rgba(59, 130, 246, 0.25);
  }

  button.primary:hover {
    background: #2563eb;
  }

  button.secondary {
    background: #f1f5f9;
    color: #0f172a;
  }

  button.secondary:hover {
    background: #e2e8f0;
  }

  .status {
    margin-top: 14px;
    font-size: 0.9rem;
    color: #0284c7;
    min-height: 20px;
  }
</style>

  </head>

  <body>
    <div class="container">
      <h1>Generador de Prompt — Rebalanceo Institucional</h1>
      <p>
        Pega abajo el <strong>perfil</strong> y <strong>portafolio propuesto</strong>.  
        Al generar, se incrusta automáticamente dentro del prompt profesional.
      </p>

        <!-- INPUT PERFIL DEL USUARIO -->
      <div class="section">
        <h3><Perfil del usuario (input)</h3>
        <div class="box">
          <textarea
            id="perfilInput"
            placeholder="Copia aqui el perfil del usuario."
          ></textarea>
        </div>
      </div>

      <!-- INPUT PORTAFOLIO -->
      <div class="section">
        <h3>Portafolio propuesto (input)</h3>
        <div class="box">
          <textarea
            id="portfolioInput"
            placeholder="Copia aqui el portafolio propuesto."
          ></textarea>
        </div>
      </div>

      <!-- PROMPT FINAL -->
      <div class="section">
        <h3>Prompt generado (listo para copiar)</h3>
        <div class="box">
          <textarea id="promptOutput" readonly></textarea>
        </div>
      </div>

      <!-- ACTIONS -->
      <div class="actions">
        <button class="primary" id="generate">Generar prompt</button>
        <button class="secondary" id="copy">Copiar prompt</button>
      </div>

      <div class="status" id="status"></div>
    </div>

    <script>
  const basePrompt = `PROMPT PROFESIONAL — REBALANCEO INSTITUCIONAL CON CAPITALIZACIÓN
# PROMPT PROFESIONAL — REBALANCEO INSTITUCIONAL CON PLAN DE EJECUCIÓN COMPLETO

Actúa como un **gestor de portafolios cuantitativo institucional (20+ años en equity markets)** especializado en:
- Asignación táctica sectorial
- Control de riesgo y ejecución profesional
- Transition management y secuenciación de trades
- Selección por capitalización bursátil y liquidez

---

## PERFIL DEL USUARIO (INPUT OBLIGATORIO)

{{PERFIL_DEL_USUARIO}}

---

## OBJETIVO

Comparar un portafolio real vs. distribución objetivo por sectores GICS y producir un **plan de rebalanceo institucional ejecutable** con secuenciación lógica de trades.

---

## PORTAFOLIO PROPUESTO (TARGET)

{{PORTFOLIO}}

---

## PORTAFOLIO ACTUAL (REAL)

[IMAGEN/DATOS DEL PORTAFOLIO ACTUAL CON POSICIONES, VALORES Y TICKERS]

---

## FORMATO DE SALIDA (TABLA PROFESIONAL ÚNICA)

Genera **únicamente una tabla** en formato Markdown con las siguientes columnas obligatorias:

### Columnas principales:

1. **Prioridad**: Número secuencial (1, 2, 3...) basado en:
   - Fase 1 primero: Liquidar posiciones a salir
   - Fase 2 segundo: Reducir sobreexposiciones
   - Fase 3 tercero: Aumentar/Crear posiciones (ordenadas por magnitud de desviación descendente)

2. **Sector (GICS)**: Nombre del sector estándar GICS

3. **Subsector**: Detalle de subsectores dentro del sector

4. **Mercado (DM/EM)**: Distribución geográfica (ej: "DM 65% / EM 35%")

5. **Tickers actuales**: Tickers existentes en la posición actual (o "-" si no existe)

6. **Propuesto % ($)**: Peso objetivo y monto en dólares (ej: "20% ($800)")

7. **Actual % ($)**: Peso actual y monto en dólares (ej: "17.3% ($604)")

8. **Variación (pp)**: Diferencia en puntos porcentuales (ej: "+2.7 pp")

9. **Variación $**: Diferencia en dólares (ej: "$+93")

10. **Acción**: Una de las siguientes:
    - **Crear** → cuando el peso actual del sector es 0% y se requiere abrir nueva posición
    - **Aumentar** → cuando ya existe exposición y debe incrementarse
    - **Reducir** → cuando existe exposición superior al objetivo
    - **Salir** → cuando el objetivo del sector es 0%

11. **Ticker objetivo**: Detalle específico de la acción según estas reglas:
    - Si **Crear**: "Agregar [N] ticker(s) nuevo(s)" (donde N = número de tickers objetivo)
    - Si **Aumentar** y faltan tickers: "[Tickers actuales] + Agregar [N] ticker(s)" (donde N = diferencia)
    - Si **Aumentar** y NO faltan tickers: "Incrementar: [Tickers actuales]"
    - Si **Reducir** y sobran tickers: "Reducir [N] ticker(s) de: [Tickers actuales]"
    - Si **Reducir** y NO sobran tickers: "Reducir posición: [Tickers actuales]"
    - Si **Salir**: "Cerrar: [Tickers actuales]"

12. **Tipo de orden**: Tipo de orden recomendado:
    - "Market/Limit (venta)" para Salir
    - "Market/Limit (venta parcial)" para Reducir
    - "Limit (compra adicional)" para Aumentar
    - "Limit (compra nueva)" para Crear

13. **Secuencia ejecución**: Fase del plan:
    - "Fase 1: Liquidar" para salidas completas
    - "Fase 2: Reducir" para reducciones parciales
    - "Fase 3: Aumentar" para incrementos
    - "Fase 3: Crear" para posiciones nuevas

14. **Capitalización objetivo**: Rango de capitalización bursátil recomendado:
    - "Large/Mega Cap (>$200B)" para sectores momentum/growth
    - "Large Cap ($10B-$200B)" para sectores core
    - "Mid/Large Cap ($2B-$200B)" para sectores diversificadores
    - "-" para posiciones a salir

---

## REGLAS DE PRIORIZACIÓN (CRÍTICO)

1. **Fase 1 (Prioridad 1-2)**: Ejecutar PRIMERO todas las salidas (Acción = "Salir") para generar liquidez inmediata

2. **Fase 2 (Prioridad siguiente)**: Ejecutar todas las reducciones (Acción = "Reducir") ordenadas por magnitud de desviación descendente

3. **Fase 3 (Prioridad final)**: Ejecutar aumentos y creaciones (Acción = "Aumentar" o "Crear") ordenadas por magnitud de desviación descendente

4. Dentro de cada fase, ordenar por **magnitud absoluta de desviación (pp)** de mayor a menor

---

## VALIDACIÓN FINAL (INCLUIR AL FINAL DE LA RESPUESTA)

Después de la tabla, incluir un resumen ejecutivo con:

=== RESUMEN DE EJECUCIÓN ===
Cash disponible actual: $[MONTO]
Liquidez a generar (Fase 1-2): $[MONTO] (suma de variaciones negativas)
Capital necesario (Fase 3): $[MONTO] (suma de variaciones positivas)
Validación: [SUFICIENTE/INSUFICIENTE] para ejecutar el rebalanceo completo


---

## RESTRICCIONES ESTRICTAS

⚠️ **NO incluir texto narrativo, explicaciones, ni comentarios adicionales antes o después de la tabla**
⚠️ **La tabla debe estar ordenada por la columna "Prioridad" de forma ascendente (1, 2, 3...)**
⚠️ **Todas las columnas son obligatorias**
⚠️ **El resumen de ejecución es obligatorio después de la tabla**

---

## CONTROL DE CALIDAD (ANTES DE RESPONDER)

- ¿La tabla tiene exactamente 14 columnas?
- ¿Están todas las filas ordenadas por "Prioridad"?
- ¿Las Fases 1 y 2 aparecen antes que la Fase 3?
- ¿La columna "Ticker objetivo" especifica números exactos de tickers a agregar/reducir?
- ¿Cada fila tiene un "Tipo de orden" coherente con la "Acción"?
- ¿El resumen de ejecución incluye validación de liquidez?


`;

  const perfilInput = document.getElementById("perfilInput");
  const portfolioInput = document.getElementById("portfolioInput");
  const promptOutput = document.getElementById("promptOutput");
  const status = document.getElementById("status");

  document.getElementById("generate").addEventListener("click", () => {
    const perfilText = perfilInput.value.trim();
    const portfolioText = portfolioInput.value.trim();

    if (!perfilText) {
      status.textContent = "Debes ingresar el perfil del usuario.";
      return;
    }

    if (!portfolioText) {
      status.textContent = "Debes ingresar el portafolio propuesto.";
      return;
    }

    let finalPrompt = basePrompt
      .replace("{{PERFIL_DEL_USUARIO}}", perfilText)
      .replace("{{PORTFOLIO}}", portfolioText);

    promptOutput.value = finalPrompt;
    status.textContent = "Prompt generado correctamente.";
  });

  document.getElementById("copy").addEventListener("click", async () => {
    if (!promptOutput.value) return;

    await navigator.clipboard.writeText(promptOutput.value);
    status.textContent = "Prompt copiado al portapapeles.";
  });
</script>

  </body>
</html>
