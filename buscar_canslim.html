<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador Prompt CAN SLIM</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f7;
      color: #1d1d1f;
    }
    .container {
      max-width: 980px;
      margin: 0 auto;
      background-color: white;
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #1d1d1f;
    }
    p, pre {
      font-size: 15px;
      line-height: 1.6;
      color: #1d1d1f;
      margin-bottom: 18px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* Inputs uno debajo de otro */
    .form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin: 14px 0 18px;
      max-width: 640px;
    }

    label {
      font-size: 13px;
      color: #3a3a3c;
      display: block;
      margin-bottom: 6px;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #d2d2d7;
      background: #fff;
      font-size: 15px;
      outline: none;
      box-sizing: border-box;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #0a84ff;
      box-shadow: 0 0 0 3px rgba(10,132,255,0.15);
    }

    .hint {
      font-size: 13px;
      color: #6e6e73;
      margin-top: -6px;
      margin-bottom: 10px;
    }
    .error {
      background: #fff2f2;
      border: 1px solid #ffd0d0;
      color: #b42318;
      padding: 10px 12px;
      border-radius: 12px;
      margin-bottom: 12px;
      display: none;
    }

    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .btn {
      border: none;
      padding: 10px 16px;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
      transition: background-color 0.15s ease, transform 0.05s ease;
    }
    .btn:active { transform: translateY(1px); }

    .btn-primary {
      background-color: #0a84ff;
      color: white;
    }
    .btn-primary:disabled {
      background-color: #7fb6ff;
      cursor: default;
    }

    .btn-secondary {
      background-color: #1d1d1f;
      color: white;
    }
    .btn-secondary:disabled {
      background-color: #8b8b90;
      cursor: default;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    .output {
      background: #f5f5f7;
      border-radius: 16px;
      padding: 16px;
      border: 1px solid #e5e5ea;
      margin-top: 14px;
    }

    .row {
      margin-bottom: 2px;
    }

    .small {
      font-size: 12px;
      color: #6e6e73;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Generador de Prompt CAN SLIM</h1>
    <p>Completa los par√°metros y genera el prompt listo para copiar.</p>

    <div class="form" role="group" aria-label="Inputs obligatorios">

      <div class="row">
        <label for="sector">Sector (OBLIGATORIO)</label>
        <select id="sector">
          <option value="">Selecciona‚Ä¶</option>
          <option>Tecnolog√≠a</option>
          <option>Salud</option>
          <option>Industrial</option>
          <option>Energ√≠a</option>
          <option>Financiero</option>
          <option>Consumo Discrecional</option>
          <option>Consumo B√°sico</option>
          <option>Materiales</option>
          <option>Utilities</option>
          <option>Real Estate</option>
          <option>Comunicaci√≥n/Telecom</option>
          <option>Semiconductores</option>
          <option>Software</option>
          <option>IA/Cloud</option>
          <option>Ciberseguridad</option>
          <option>Retail</option>
          <option>Otro</option>
        </select>
      </div>

      <div class="row">
        <label for="activos">Activos (OBLIGATORIO)</label>
        <select id="activos">
          <option value="">Selecciona‚Ä¶</option>
          <option>Acciones</option>
          <option>ETFs</option>
          <option>Acciones+ETFs</option>
          <option>ADRs</option>
        </select>
      </div>

      <div class="row">
        <label for="capital">Capital a invertir por operaci√≥n (OBLIGATORIO)</label>
        <input id="capital" type="text" placeholder="Ej: 1.000 USD | 5.000 USD | 2.000.000 COP" autocomplete="off" />
      </div>

      <div class="row">
        <label for="horizonte">Horizonte (OBLIGATORIO)</label>
        <select id="horizonte">
          <option value="">Selecciona‚Ä¶</option>
          <option>Intrad√≠a</option>
          <option>Swing</option>
          <option>Largo Plazo</option>
          <option>Buy and hold</option>
        </select>
      </div>

      <div class="row">
        <label for="riesgo">Riesgo (OBLIGATORIO)</label>
        <select id="riesgo">
          <option value="">Selecciona‚Ä¶</option>
          <option>Bajo</option>
          <option>Medio</option>
          <option>Alto</option>
        </select>
      </div>

      <div class="row">
        <label for="mercado">Mercado (OBLIGATORIO)</label>
        <select id="mercado">
          <option value="">Selecciona‚Ä¶</option>
          <option>USA</option>
          <option>Global</option>
          <option>Europa</option>
          <option>Latam</option>
          <option>Nasdaq</option>
          <option>NYSE</option>
          <option>AMEX</option>
          <option>Canad√°</option>
          <option>Reino Unido</option>
          <option>Alemania</option>
          <option>Francia</option>
          <option>Espa√±a</option>
          <option>Italia</option>
          <option>Brasil</option>
          <option>M√©xico</option>
          <option>Colombia</option>
        </select>
      </div>

      <div class="row">
        <label for="nResultados">Cantidad de resultados (OBLIGATORIO)</label>
        <select id="nResultados">
          <option value="">Selecciona‚Ä¶</option>
          <option>5</option>
          <option>10</option>
          <option>15</option>
          <option>20</option>
          <option>30</option>
        </select>
      </div>

      <div class="row">
        <label for="excluir">Excluir (OBLIGATORIO)</label>
        <textarea id="excluir" rows="2" placeholder="Ej: Micro cap, Biotech, acciones chinas, penny stocks, OTC, SPACs, baja liquidez..."></textarea>
        <div class="small">Sugerencia: separa por comas.</div>
      </div>

    </div>

    <div class="hint">
      Se reemplazan autom√°ticamente: <b>{Sector}</b>, <b>{Activos}</b>, <b>{Capital}</b>, <b>{Horizonte}</b>, <b>{Riesgo}</b>, <b>{Mercado}</b>, <b>{N_Resultados}</b>, <b>{Excluir}</b>.
    </div>

    <div id="errorBox" class="error" aria-live="polite"></div>

    <div class="controls" aria-live="polite">
      <button id="genBtn" class="btn btn-secondary" type="button">Generar prompt</button>

      <button id="copyBtn" class="btn btn-primary" type="button" aria-describedby="copyDesc" disabled>
        Copiar prompt
      </button>
      <span id="copyDesc" class="sr-only">Copia el prompt generado al portapapeles</span>
    </div>

    <div class="output">
      <pre id="descripcion">Completa los campos y pulsa ‚ÄúGenerar prompt‚Äù.</pre>
    </div>
  </div>

  <script>
    (function () {
      const out = document.getElementById("descripcion");
      const btnCopy = document.getElementById("copyBtn");
      const btnGen = document.getElementById("genBtn");
      const err = document.getElementById("errorBox");

      const sectorEl = document.getElementById("sector");
      const activosEl = document.getElementById("activos");
      const capitalEl = document.getElementById("capital");
      const horizonteEl = document.getElementById("horizonte");
      const riesgoEl = document.getElementById("riesgo");
      const mercadoEl = document.getElementById("mercado");
      const nResultadosEl = document.getElementById("nResultados");
      const excluirEl = document.getElementById("excluir");

      const template = `üß† PROMPT PROFESIONAL ‚Äì SCREENING CAN SLIM + ‚ÄúEARLY WINNERS‚Äù (Acciones / ETFs)

Rol:
Act√∫a como un analista profesional de mercados financieros especializado en la metodolog√≠a CAN SLIM de William O‚ÄôNeil, combinando an√°lisis fundamental, t√©cnico, momentum y contexto macro. Tu prioridad es seleccionar l√≠deres (confirmados o emergentes) con buen timing de mercado y alta probabilidad de continuidad. 
En paralelo, adapta CAN SLIM para detectar ‚ÄúEARLY WINNERS‚Äù (futuros compounders) sin inventar datos. Esto NO es asesor√≠a financiera.

‚úÖ PAR√ÅMETROS (obligatorios)
Sector/Tem√°tica: {Sector}
Activos: {Activos}
Capital a invertir por operaci√≥n: {Capital}
Horizonte: {Horizonte}
Riesgo: {Riesgo}
Mercado: {Mercado}
Cantidad de resultados: {N_Resultados}
Excluir (lista): {Excluir}
Benchmark de mercado (auto si no se especifica): [SPX/NDX/EuroStoxx/MSCI/IPC/Colcap, etc.]

üéØ Tarea:
Realiza un screening estricto del universo definido, combinando:
1) CAN SLIM cl√°sico (l√≠deres confirmados)
2) CAN SLIM adaptado para ‚ÄúEARLY WINNERS‚Äù (l√≠deres emergentes en etapas tempranas)

Devuelve exactamente {N_Resultados} oportunidades ordenadas por mejor calificaci√≥n (1‚Äì10).
Regla de oro: prioriza calidad sobre cantidad. Si no hay suficientes que cumplan, completa con ‚Äúwatchlist‚Äù e ind√≠calo en la columna de cumplimiento.

üìå REGLAS DE UNIVERSO (OBLIGATORIAS)
1) Exclusiones: elimina cualquier activo que coincida con ‚ÄúExcluir (lista)‚Äù.
2) Mercado:
   - USA = NYSE + Nasdaq + AMEX (si aplica).
   - Nasdaq o NYSE = solo tickers listados all√≠.
   - Europa/Latam/Global = limitar a instrumentos l√≠quidos y reconocidos.
3) Capital: si es bajo, prioriza alta liquidez, spreads bajos y facilidad de ejecuci√≥n.
4) No inventes datos: si un dato no est√° disponible o requiere pago, marca ‚ÄúN/D / requiere verificaci√≥n‚Äù.
5) Fuentes: usa datos verificables (ideal: <7 d√≠as si se pide frescura). Si no puedes verificar, ‚ÄúN/D‚Äù.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìå CAN SLIM CL√ÅSICO (para l√≠deres confirmados)

C ‚Äì Current Earnings
- EPS trimestral > +20% YoY (si aplica)
- Aceleraci√≥n en trimestres recientes (mejor)

A ‚Äì Annual Earnings
- EPS anual > +25% YoY
- Consistencia 3‚Äì5 a√±os (si existe historial)

N ‚Äì New
- Catalizadores 1‚Äì6 meses: nuevo producto/tecnolog√≠a, expansi√≥n, mejora de gu√≠as/m√°rgenes, cambios positivos
- Precio cerca o rompiendo m√°ximo 52 semanas (ideal)

S ‚Äì Supply & Demand
- Preferencia por float menor (si es saludable y no cae en exclusiones)
- Volumen alto o creciente; demanda visible
- Umbral de liquidez seg√∫n riesgo:
  * Bajo: > 500k/d√≠a
  * Medio: > 250k/d√≠a
  * Alto: > 100k/d√≠a

L ‚Äì Leader
- Fuerza relativa superior vs pares/sector/√≠ndice
- T√©cnica m√≠nima: Precio > MA50 y MA200; tendencia alcista confirmada

I ‚Äì Institutional Sponsorship
- Ownership institucional significativo e idealmente creciente
- Se√±ales: incremento de holders, filings (si disponible)

M ‚Äì Market Direction
- Solo proponer entradas nuevas si el mercado general est√° alcista/confirmado.
- Si M NO se cumple: entregar watchlist condicionada (sin ‚Äúentrada‚Äù).

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìå CAN SLIM ADAPTADO ‚Äì ‚ÄúEARLY WINNERS‚Äù (para futuros gigantes)

Objetivo: detectar empresas tempranas con potencial de dominancia (plataformas / networks / switching costs).
Aqu√≠ C y A se interpretan como TRACCI√ìN y ESCALABILIDAD (no solo EPS).

C* ‚Äì Current Traction (reemplaza EPS cuando no aplica)
- Crecimiento de ingresos alto (ej: >30% YoY) o aceleraci√≥n clara
- Se√±ales de retenci√≥n / expansi√≥n (si aplica): NRR, churn bajo, etc.
- Si no hay ingresos (muy temprano), exigir evidencia fuerte de adopci√≥n + runway (y marcar ‚Äúalto riesgo‚Äù).

A* ‚Äì Annual Scalability
- CAGR ingresos 3y alto (si hay datos) o expansi√≥n de m√°rgenes brutos
- Unidad econ√≥mica mejorando (FCF rumbo a positivo, o p√©rdida decreciente con escala)

N* ‚Äì New Paradigm (la m√°s importante)
- Cambio tecnol√≥gico o de modelo (IA, cloud, data infra, biotech platform, defense tech, etc.)
- ‚ÄúPlataforma‚Äù vs ‚Äúproducto √∫nico‚Äù; TAM enorme y en expansi√≥n

S* ‚Äì Supply Asymmetry
- Diluci√≥n controlada; estructura accionaria razonable
- Float/insiders: evitar micro-OTC si est√° excluido

L* ‚Äì Early Leadership
- Liderazgo de nicho (m√©tricas mejores que peers aunque no sea #1 global)
- RS/Price action mejorando

I* ‚Äì Smart Institutional
- Presencia de inversores ‚Äúsmart‚Äù: insiders, fondos growth, VC reputado (si p√∫blico/visible)
- Cambios recientes en ownership (si disponible)

M ‚Äì Market Tailwind
- Mercado y sector favorecen m√∫ltiplos de crecimiento (evitar fases de distribuci√≥n para entradas agresivas)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚öñÔ∏è AJUSTES SEG√öN PERFIL DE RIESGO (OBLIGATORIO)

üîµ Riesgo Bajo
- Priorizar calidad, baja volatilidad, large caps, ETFs
- Evitar empresas sin ganancias o sin caja suficiente

üü† Riesgo Medio
- Acepta growth rentable o camino claro a rentabilidad
- Mid/Large caps; volatilidad moderada

üî¥ Riesgo Alto
- Puede incluir early winners no rentables si:
  (1) Tracci√≥n fuerte (C*) y N* claro
  (2) Liquidez m√≠nima cumplida
  (3) Se√±ales t√©cnicas no contradictorias

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚è≥ PRIORIZACI√ìN SEG√öN HORIZONTE (OBLIGATORIO)

Intrad√≠a
- Liquidez extrema, spreads bajos
- Momentum intradiario + catalizador (si no hay dato, indicar)

Swing / Mediano
- Patrones CAN SLIM: Cup & Handle, Flat Base, breakouts, consolidaciones
- Preferir entradas cerca de pivote y con volumen

Largo Plazo / Buy & Hold
- Ventaja competitiva + crecimiento estructural
- Priorizar early winners con plataforma + unidad econ√≥mica mejorando
- Evitar ‚Äústory stocks‚Äù sin tracci√≥n medible (o marcarlos como especulativos)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä FORMATO DE RESULTADOS (OBLIGATORIO)

1) Resumen del mercado (M)
- Estado del mercado: Alcista / Neutral / Distribuci√≥n
- √çndices usados y conclusi√≥n (‚Äúapto para entradas‚Äù o ‚Äúsolo watchlist‚Äù)

2) Tabla final (exactamente {N_Resultados} filas)
| # | Ticker | Nombre | Tipo (Acci√≥n/ETF) | Mercado | Sector/Tem√°tica | Enfoque (CAN SLIM / Early Winner / Mixto) | Calificaci√≥n (0‚Äì10) | Cumplimientos clave (breve) | Motivo l√≠der / tesis | Nota de liquidez |

üî¢ C√ÅLCULO DE CALIFICACI√ìN (0‚Äì10) ‚Äì basado en criterio profesional (no advice)
Asigna una nota total 0‚Äì10 combinando:

A) Calidad del ‚Äúcaso‚Äù (0‚Äì4)
- Moat / plataforma / TAM / ventaja competitiva
- Tracci√≥n (EPS o Revenue) y escalabilidad (m√°rgenes / unit economics)

B) Timing t√©cnico-momentum (0‚Äì3)
- Tendencia (MA50/MA200), estructura, breakout/pullback, RS vs √≠ndice

C) Riesgo y ejecuci√≥n (0‚Äì2)
- Liquidez/spread adecuados al capital
- Diluci√≥n/deuda/riesgos visibles

D) Catalizadores (0‚Äì1)
- Earnings pr√≥ximos, gu√≠as, lanzamientos, contratos, regulatorio, M&A

Reglas:
- 10 = excelente oportunidad (seg√∫n el marco), 0 = no invertir (seg√∫n el marco)
- Si faltan datos: baja la calificaci√≥n y marca ‚ÄúN/D / requiere verificaci√≥n‚Äù
- Ordena de mayor a menor calificaci√≥n.
- No des recomendaciones expl√≠citas; solo evaluaci√≥n y watchlist.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ñ∂Ô∏è ENTRADA DEL USUARIO (auto-rellenada)
Sector/Tem√°tica: {Sector}
Activos: {Activos}
Capital por operaci√≥n: {Capital}
Horizonte: {Horizonte}
Riesgo: {Riesgo}
Mercado: {Mercado}
Cantidad de resultados: {N_Resultados}
Excluir (lista): {Excluir}
Benchmark (opcional): (auto)

Devuelve los resultados con el formato indicado.`;



      function showError(msg) {
        err.style.display = "block";
        err.textContent = msg;
      }
      function clearError() {
        err.style.display = "none";
        err.textContent = "";
      }

      function normalizeText(t) {
        return (t || "").trim();
      }

      function buildPrompt() {
        const sector = normalizeText(sectorEl.value);
        const activos = normalizeText(activosEl.value);
        const capital = normalizeText(capitalEl.value);
        const horizonte = normalizeText(horizonteEl.value);
        const riesgo = normalizeText(riesgoEl.value);
        const mercado = normalizeText(mercadoEl.value);
        const nResultados = normalizeText(nResultadosEl.value);
        const excluir = normalizeText(excluirEl.value);

        const missing = [];
        if (!sector) missing.push("Sector");
        if (!activos) missing.push("Activos");
        if (!capital) missing.push("Capital");
        if (!horizonte) missing.push("Horizonte");
        if (!riesgo) missing.push("Riesgo");
        if (!mercado) missing.push("Mercado");
        if (!nResultados) missing.push("Cantidad de resultados");
        if (!excluir) missing.push("Excluir");

        if (missing.length) {
          showError("Faltan campos obligatorios: " + missing.join(", ") + ".");
          btnCopy.disabled = true;
          return null;
        }

        clearError();

        const finalPrompt = template
          .replaceAll("{Sector}", sector)
          .replaceAll("{Activos}", activos)
          .replaceAll("{Capital}", capital)
          .replaceAll("{Horizonte}", horizonte)
          .replaceAll("{Riesgo}", riesgo)
          .replaceAll("{Mercado}", mercado)
          .replaceAll("{N_Resultados}", nResultados)
          .replaceAll("{Excluir}", excluir);

        return finalPrompt;
      }

      async function fallbackCopyTextToClipboard(text) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.top = "-9999px";
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try {
          document.execCommand("copy");
        } finally {
          document.body.removeChild(textarea);
        }
      }

      async function copyText(text) {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          return navigator.clipboard.writeText(text);
        }
        return fallbackCopyTextToClipboard(text);
      }

      btnGen.addEventListener("click", () => {
        const finalPrompt = buildPrompt();
        if (!finalPrompt) return;
        out.textContent = finalPrompt;
        btnCopy.disabled = false;
      });

      btnCopy.addEventListener("click", async () => {
        const text = out.innerText || out.textContent;
        if (!text || text.includes("Completa los campos")) return;

        btnCopy.disabled = true;
        const originalText = btnCopy.textContent;

        try {
          await copyText(text);
          btnCopy.textContent = "¬°Copiado!";
        } catch (e) {
          console.error("No se pudo copiar:", e);
          btnCopy.textContent = "Error al copiar";
        } finally {
          setTimeout(() => {
            btnCopy.textContent = originalText;
            btnCopy.disabled = false;
          }, 1500);
        }
      });
    })();
  </script>
</body>
</html>

