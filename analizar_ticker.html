<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generar Informe de Ticker</title>
    <style>
        body {
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;
            background: #f5f5f7;
            color: #1d1d1f;
            margin: 0;
            padding: 24px;
        }
        .container {
            max-width: 800px;
            background: #fff;
            padding: 36px;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.09);
            margin: 0 auto;
        }
        h1 {
            font-size: 2.2rem;
            font-weight: 670;
            margin-bottom: 18px;
        }
        label {
            display: block;
            margin-top: 18px;
            margin-bottom: 5px;
            font-weight: 500;
        }
        input[type="text"], input[type="number"] {
            padding: 10px; font-size: 16px; border:1px solid #d2d2d7; border-radius:8px;
            width: 100%; max-width: 350px; margin-bottom: 10px;
        }
        button {
            margin-top: 16px; background:#1760e8; color:#fff;
            padding: 12px 22px; font-weight:bold; font-size: 15px;
            border: none; border-radius: 8px; cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #1247aa;
        }
        .informe {
            padding: 22px;
            margin-top: 36px;
            background: #eef3fa;
            border-radius: 12px;
            font-size: 15px;
            white-space: pre-wrap;
        }
        .copy-btn {
            margin: 20px 0 0 0;
            border: none; background: #34d058;
            color: #fff; font-size: 15px; font-weight: bold;
            padding: 10px 22px; border-radius: 8px;
            cursor: pointer; transition: background 0.3s;
        }
        .copy-btn:hover { background: #22863a; }
    </style>
</head>
<body>
<div class="container">
    <h1>Informe Profesional del Ticker</h1>
    <label for="ticker">Ticker del activo:</label>
    <input type="text" id="ticker" maxlength="10" placeholder="Ejemplo: MSFT" required autocomplete="off">

    <label for="inversion">Inversi√≥n total disponible (USD):</label>
    <input type="number" id="inversion" step="1" min="1" max="999999"
           placeholder="Ejemplo: 400" value="400" required>

    <button id="generarBtn">Generar informe</button>

    <div id="informeSalida" class="informe" style="display:none;"></div>
    <button id="copyBtn" class="copy-btn" style="display:none;">Copiar informe</button>
</div>

<script>
// Convierte ticker a may√∫sculas en tiempo real
document.getElementById("ticker").addEventListener("input", function() {
    this.value = this.value.toUpperCase();
});

function fechaActualStr() {
    const hoy = new Date();
    return hoy.toISOString().split('T')[0];
}

document.getElementById("generarBtn").onclick = function() {
    const ticker = document.getElementById("ticker").value.trim();
    const inversion = document.getElementById("inversion").value.trim();

    // Validaci√≥n obligatoria
    if (!ticker || !inversion) {
        alert("Por favor, ingresa el Ticker y la Inversi√≥n total disponible. Ambos son obligatorios.");
        return;
    }
    const fecha = fechaActualStr();

    const plantilla = 
`ROL:
Eres un Analista Financiero Senior con doctorado en Mercados de Capitales, especializado en an√°lisis fundamental, t√©cnico y macroecon√≥mico de acciones, ETFs y activos globales. Aplica un enfoque bottom-up (empresa) y top-down (mercado). Investiga en los medios financieros m√°s recientes y confiables: Investor Relations, Bloomberg, Reuters, Yahoo Finance, MarketScreener, Seeking Alpha.

INSTRUCCIONES:
Completa de forma profesional, clara y precisa la siguiente plantilla para el ticker ${ticker}, con:
- Inversi√≥n total disponible: USD $${inversion}

Si alg√∫n dato no est√° disponible, indica ‚ÄúN/D‚Äù.

FORMATO DE SALIDA:
- Genera un **texto estructurado con tablas profesional** con:
¬†¬†- T√≠tulos jerarquizados (H1, H2, H3)
¬†¬†- Tabla de contenidos (opcional)
¬†¬†- Tablas para ratios y c√°lculos
¬†¬†- P√°rrafos de justificaci√≥n claros y concisos
¬†¬†- Secci√≥n final "Anexos y Fuentes" con links y fechas exactas
¬†- No debes incluir las citas, ‚Äúcite‚Äù.
¬†- No generar Json al final.¬†

üìÖ Fecha: ${fecha} (fecha de consulta)

I. Datos Generales del Activo
- Ticker: ${ticker} ‚Äì [Nombre completo]
- Precio actual: [Precio en USD] (Fuente: [sitio] ‚Äî [fecha de consulta]) [barata , cara, justamente valorada]
- Descripci√≥n: [Breve resumen]
- Insider ownership: [%] >= 20%
- Tesis de inversi√≥n: [Ventajas]
- Pa√≠s: [Pa√≠s]
- Sector / Subsector: [Sector], [Subsector]
- Clasificaci√≥n del activo: [Acciones USA / Acciones Internacionales /¬† ETF Globales / Small Cap / Dividendos Internacionales /]
- Estilo de trading: [Swing / Largo Plazo / mediano Plazo]
- Estilo fundamental: [Value / Growth / Dividend Investing / CAN SLIM]
- ¬øInvertir√≠a hoy?: [S√≠ / No]
- Justificaci√≥n: [Motivo principal ‚Äî 2‚Äì4 l√≠neas]
- Calificaci√≥n total: [x/10]

Capital asignado: USD $${inversion}

II. An√°lisis Fundamental
| Ratio | Valor | Fuente | Fecha |
|-------|-------:|--------|-------|
| PER | [valor] | [fuente] | [fecha] |
| P/B | [valor] | [fuente] | [fecha] |
| ROE | [valor] | [fuente] | [fecha] |
| Margen operativo | [valor] | [fuente] | [fecha] |
| Crec. ingresos (3 a√±os) | [valor] | [fuente] | [fecha] |
| Endeudamiento | [valor] | [fuente] | [fecha] |
| FCF | [valor] | [fuente] | [fecha] |

Catalizadores futuros:
- [Lista con fechas cuando aplique]

III. Contexto de Mercado (Top-down)
- VIX actual: [nivel] ‚Äî interpretaci√≥n (fuente ‚Äî fecha)
- Fear & Greed Index: [nivel] ‚Äî interpretaci√≥n (fuente ‚Äî fecha)
- Tendencia general del mercado: [Descripci√≥n] (fuente ‚Äî fecha)
- Eventos macro cercanos: [Listado con fechas relevantes]

IV. Configuraci√≥n T√©cnica
- Setup T√©cnico: [Ruptura / Pullback / Patr√≥n / Soporte din√°mico]
- Volumen acompa√±a: [S√≠ / No] (compara con promedio 20 d√≠as ‚Äî fuente ‚Äî fecha)
- Nivel de entrada sugerido: USD [valor] (explicar por qu√©)
- Stop Loss (SL): USD [valor]
- Take Profit (TP): USD [valor]
- RRR calculado: RRR = (TP - Entrada) / (Entrada - SL) ‚Üí [valor con 2 decimales]
- Volumen de acciones (f√≥rmula):
¬†¬†Volumen = (Inversi√≥n total disponible / Precio actual) = acciones
- VWAP(Volume Weighted Average Price)

V. Gesti√≥n de Riesgo
- Riesgo unitario m√°ximo: USD 200‚Äì400 (1‚Äì2 % del capital total)
- Tama√±o de posici√≥n sugerido: [USD y % del portafolio]
- Compatibilidad con la cartera: [Comentario sobre diversificaci√≥n y exposici√≥n sectorial]

VI. Comparativa Sectorial (si aplica)
- Comparables: [Ticker A], [Ticker B], [ETF de referencia]
- Tabla resumen: PER, ROE, YTD Return, Market Cap (fuentes y fechas)
- Conclusi√≥n breve: [Posicionamiento relativo]

VII. Catalizadores y Estrategia Global
Factores o eventos que pueden modificar la valoraci√≥n o momentum del activo (earnings, lanzamientos, fusiones, pol√≠ticas, tasas, ciclo).
Integraci√≥n con la cartera: c√≥mo encaja este activo dentro de la estrategia global (tem√°tica, horizonte, diversificaci√≥n).

Resumen Ejecutivo Final (tabla)
- Ticker: ${ticker}
- Recomendaci√≥n: [Comprar / Mantener / Vender]
- Horizonte recomendado: [Corto / Mediano / Largo plazo]
- Puntuaci√≥n total: [x/10]
- Comentario del analista: [3‚Äì4 l√≠neas]

ANEXOS Y FUENTES:
- Lista de URLs, nombre de la fuente y fecha de consulta para cada fuente citada.
- Incluir nota sobre metodolog√≠a y cualquier supuesto usado en c√°lculos.

NOTAS FINALES:
- Usa tono anal√≠tico, objetivo y profesional (sin emojis) apropiado para clientes institucionales.
- Si alg√∫n c√°lculo no puede hacerse por falta de datos, marca ‚ÄúN/D‚Äù y explica brevemente por qu√©.
`;

    const salida = document.getElementById("informeSalida");
    salida.style.display = "block";
    salida.textContent = plantilla;
    document.getElementById("copyBtn").style.display = "inline-block";
};

// Copiar informe
document.getElementById("copyBtn").onclick = function() {
    const texto = document.getElementById("informeSalida").textContent;
    navigator.clipboard.writeText(texto).then(() => {
        alert("Informe copiado al portapapeles");
    });
};
</script>
</body>
</html>
